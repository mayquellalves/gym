<?xml version="1.0" encoding="UTF-8"?>
<xml-fragment xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
  <ser:coreEntry isProxy="true" isEnabled="true">
    <ser:description>Proxy responsável por gerenciar as informações de um determiando mapa de credencias do Weblogic.
Possui as operações:
retrieveCredential - retorna a credencial da autoridade informada.
updateCredential - atualiza a credencial da autoridade informada.</ser:description>
    <ser:binding type="SOAP" isSoap12="true" xsi:type="con4:SoapBindingType" xmlns:con4="http://www.bea.com/wli/sb/services/bindings/config">
      <con4:wsdl ref="netarchitecture/security/credentialstoreosb/wsdl/proxy/CredentialStoreOSBV1"/>
      <con4:binding>
        <con4:name>CredentialStoreOSBV1BindingLCL</con4:name>
        <con4:namespace>http://www.netservicos.com.br/CredentialStoreOSBV1</con4:namespace>
      </con4:binding>
      <con4:selector type="SOAP body"/>
    </ser:binding>
    <ser:monitoring isEnabled="false">
      <ser:aggregationInterval>10</ser:aggregationInterval>
      <ser:pipelineMonitoringLevel>Pipeline</ser:pipelineMonitoringLevel>
    </ser:monitoring>
    <ser:reporting>true</ser:reporting>
    <ser:logging isEnabled="true">
      <ser:logLevel>debug</ser:logLevel>
    </ser:logging>
    <ser:sla-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:sla-alerting>
    <ser:pipeline-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:pipeline-alerting>
    <ser:ws-policy>
      <ser:binding-mode>owsm-policy-bindings</ser:binding-mode>
    </ser:ws-policy>
  </ser:coreEntry>
  <ser:endpointConfig>
    <tran:provider-id>local</tran:provider-id>
    <tran:inbound>true</tran:inbound>
    <tran:inbound-properties/>
    <tran:all-headers>true</tran:all-headers>
  </ser:endpointConfig>
  <ser:router errorHandler="_onErrorHandler-1542298499873280340--4d2ed4d9.13a415606e7.-7eaf">
    <con:pipeline type="error" name="_onErrorHandler-1542298499873280340--4d2ed4d9.13a415606e7.-7eaf">
      <con:stage name="ErrorHandlerBranchNode">
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/FaultHandlerV1" prefix="faul" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Message" prefix="coreschema" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Logging" prefix="log" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/FormatLogMessageV1" prefix="for" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/fault/ErrorInfo" prefix="err" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Alert" prefix="aler" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/AlertV1" prefix="alert" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidDomain" prefix="nid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidAbeLevel" prefix="abe" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata" prefix="met" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con3:ifThenElse>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e86</con2:id>
            <con3:case>
              <con3:condition>
                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">empty($customFault)</con3:xqueryText>
              </con3:condition>
              <con3:actions>
                <con3:assign varName="localMessageParameters">
                  <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e85</con2:id>
                  <con3:expr>
                    <con2:xqueryText><![CDATA[<log:MessageParameters>
      <log:Value>{$operation}</log:Value>
      <log:Value>{'CredentialStoreOSB12V1LCL'}</log:Value>
</log:MessageParameters>]]></con2:xqueryText>
                  </con3:expr>
                </con3:assign>
                <con3:assign varName="errorHandlerRequest">
                  <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e84</con2:id>
                  <con3:expr>
                    <con2:xqueryTransform>
                      <con2:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/MapFaultHandlerReqXQuery"/>
                      <con2:param name="validationMessages">
                        <con2:path>$null</con2:path>
                      </con2:param>
                      <con2:param name="messageParameters">
                        <con2:path>$localMessageParameters</con2:path>
                      </con2:param>
                      <con2:param name="currentFault">
                        <con2:path>$fault</con2:path>
                      </con2:param>
                      <con2:param name="currentBody">
                        <con2:path>$body</con2:path>
                      </con2:param>
                      <con2:param name="accessResourceName">
                        <con2:path>'netarchitecture/security/credentialstoreosb/proxyservice/CredentialStoreOSB12V1LCL.BranchNode'</con2:path>
                      </con2:param>
                      <con2:param name="exceptionStackTrace">
                        <con2:path>data($fault/ctx:details)</con2:path>
                      </con2:param>
                      <con2:param name="messageCode">
                        <con2:path>'OSB-NETARCHITECTURE-00018'</con2:path>
                      </con2:param>
                      <con2:param name="callResponse">
                        <con2:path>$null</con2:path>
                      </con2:param>
                      <con2:param name="exceptionClassification">
                        <con2:path>'CLASSIFICATION_UNEXPECTED'</con2:path>
                      </con2:param>
                      <con2:param name="additionalInformation">
                        <con2:path>$null</con2:path>
                      </con2:param>
                    </con2:xqueryTransform>
                  </con3:expr>
                </con3:assign>
                <con3:assign varName="headerRequest">
                  <con2:id>_ActionId-3038140430279763196--2d56a6d7.13a89bb1d37.-7f1c</con2:id>
                  <con3:expr>
                    <con2:xqueryText>if ($headerDefaults) then
	$headerDefaults
else
	$header</con2:xqueryText>
                  </con3:expr>
                </con3:assign>
                <con3:wsCallout>
                  <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e83</con2:id>
                  <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/fault/faulthandler/proxyservice/FaultHandler12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con3:operation>faultHandler</con3:operation>
                  <con3:request>
                    <con3:body>$errorHandlerRequest</con3:body>
                    <con3:header>$headerRequest</con3:header>
                  </con3:request>
                  <con3:response>
                    <con3:body>errorHandlerResponse</con3:body>
                  </con3:response>
                  <con3:requestTransform/>
                  <con3:responseTransform/>
                </con3:wsCallout>
                <con3:assign varName="customFault">
                  <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e82</con2:id>
                  <con3:expr>
                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                      <con3:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/TransformOSBFaultToRuntimeFaultXQuery"/>
                      <con3:param name="fault">
                        <con3:path>$errorHandlerResponse/ctx:fault</con3:path>
                      </con3:param>
                    </con3:xqueryTransform>
                  </con3:expr>
                </con3:assign>
                <con3:wsCallout>
                  <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e80</con2:id>
                  <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/formatlogmessage/proxyservice/FormatLogMessage12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con3:operation>formatLogMessage</con3:operation>
                  <con3:request>
                    <con3:body>$formatLogMessageRequest</con3:body>
                    <con3:header>$headerRequest</con3:header>
                  </con3:request>
                  <con3:response>
                    <con3:body>formatLogMessageResponse</con3:body>
                  </con3:response>
                  <con3:requestTransform>
                    <con3:assign varName="formatLogMessageRequest">
                      <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e81</con2:id>
                      <con3:expr>
                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config"><![CDATA[<for:formatLogMessageRequest>
    <log:LogMessage>
        <log:Timestamp>{fn:data(fn:current-dateTime())}</log:Timestamp>
        <log:LogType>{'ERROR'}</log:LogType>
        <log:MessageCode>{data($errorHandlerRequest/faul:messageCode)}</log:MessageCode>
        <log:MessageParameters>
            {$localMessageParameters/@* , $localMessageParameters/node()}
        </log:MessageParameters>
        <err:ErrorInfo>
            {$errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/@* , $errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/node() }
        </err:ErrorInfo>
    </log:LogMessage>
</for:formatLogMessageRequest>]]></con3:xqueryText>
                      </con3:expr>
                    </con3:assign>
                  </con3:requestTransform>
                  <con3:responseTransform/>
                </con3:wsCallout>
                <con1:log>
                  <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e7f</con2:id>
                  <con1:logLevel>error</con1:logLevel>
                  <con1:expr>
                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)</con3:xqueryText>
                  </con1:expr>
                  <con1:message>Erro</con1:message>
                </con1:log>
                <con3:wsCallout>
                  <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e7d</con2:id>
                  <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/alert/proxyservice/Alert12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con3:operation>alert</con3:operation>
                  <con3:request>
                    <con3:body>$alertRequest</con3:body>
                    <con3:header>$headerRequest</con3:header>
                  </con3:request>
                  <con3:response>
                    <con3:body>alertResponse</con3:body>
                  </con3:response>
                  <con3:requestTransform>
                    <con3:assign varName="alertRequest">
                      <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e7e</con2:id>
                      <con3:expr>
                        <con2:xqueryText><![CDATA[<alert:alertRequest>
    <aler:Timestamp>{data(fn:current-dateTime())}</aler:Timestamp>
    <aler:Message>{fn:data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)}</aler:Message>
    <aler:ServiceSeverityLevel>{'LEVEL1'}</aler:ServiceSeverityLevel>
    <nid:NidDomain>{'NETARCHITECTURE'}</nid:NidDomain>
    <abe:NidAbeLevel>{'SECURITY'}</abe:NidAbeLevel>
    <aler:ExceptionClassification>{fn:data($errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/err:ExceptionClassification)}</aler:ExceptionClassification>
</alert:alertRequest>]]></con2:xqueryText>
                      </con3:expr>
                    </con3:assign>
                  </con3:requestTransform>
                  <con3:responseTransform/>
                </con3:wsCallout>
              </con3:actions>
            </con3:case>
            <con3:default/>
          </con3:ifThenElse>
          <con3:replace varName="body" contents-only="true">
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e7c</con2:id>
            <con3:location>
              <con2:xpathText>.</con2:xpathText>
            </con3:location>
            <con3:expr>
              <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$customFault</con3:xqueryText>
            </con3:expr>
          </con3:replace>
          <con3:delete varName="header">
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e7b</con2:id>
          </con3:delete>
          <con3:reply isError="true" xmlns:con3="http://www.bea.com/wli/sb/stages/config">
            <con3:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7e7a</con3:id>
          </con3:reply>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="request" name="PipelinePairNodeDefault_request">
      <con:stage name="LogRequest">
        <con2:context xmlns:con2="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"/>
        <con2:actions xmlns:con2="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con3:log xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config">
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-72c0</con4:id>
            <con3:logLevel>info</con3:logLevel>
            <con3:expr>
              <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$header</con4:xqueryText>
            </con3:expr>
            <con3:message>header</con3:message>
          </con3:log>
          <con3:log xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config">
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-72bf</con4:id>
            <con3:logLevel>info</con3:logLevel>
            <con3:expr>
              <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$body</con4:xqueryText>
            </con3:expr>
            <con3:message>body</con3:message>
          </con3:log>
        </con2:actions>
      </con:stage>
      <con:stage name="RaiseErrorPipelinePairNodeDefault">
        <con:context>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/FormatLogMessageV1" prefix="for" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Logging" prefix="log" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/FaultHandlerV1" prefix="faul" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/fault/ErrorInfo" prefix="err" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/fault/ValidationFault" prefix="val" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/AlertV1" prefix="alert" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Alert" prefix="aler" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidAbeLevel" prefix="abe" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidDomain" prefix="nid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con2:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred"/>
        </con:context>
        <con:actions>
          <con3:assign varName="localMessageParameters">
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7d57</con2:id>
            <con3:expr>
              <con2:xqueryText>&lt;log:MessageParameters>
      &lt;log:Value>{'CredentialStoreOSB12V1LCL'}&lt;/log:Value>
&lt;/log:MessageParameters></con2:xqueryText>
            </con3:expr>
          </con3:assign>
          <con3:assign varName="errorHandlerRequest">
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7d56</con2:id>
            <con3:expr>
              <con2:xqueryTransform>
                <con2:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/MapFaultHandlerReqXQuery"/>
                <con2:param name="validationMessages">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'netarchitecture/security/credentialstoreosb/proxyservice/CredentialStoreOSB12V1LCL.BranchNode.PipelinePairNodeDefault'</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'OSB-NETARCHITECTURE-00017'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="additionalInformation">
                  <con2:path>$null</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con3:expr>
          </con3:assign>
          <con3:wsCallout>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7d55</con2:id>
            <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/fault/faulthandler/proxyservice/FaultHandler12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>faultHandler</con3:operation>
            <con3:request>
              <con3:body>$errorHandlerRequest</con3:body>
              <con3:header>$header</con3:header>
            </con3:request>
            <con3:response>
              <con3:body>errorHandlerResponse</con3:body>
            </con3:response>
            <con3:requestTransform/>
            <con3:responseTransform/>
          </con3:wsCallout>
          <con3:assign varName="customFault">
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7d54</con2:id>
            <con3:expr>
              <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                <con3:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/TransformOSBFaultToRuntimeFaultXQuery"/>
                <con3:param name="fault">
                  <con3:path>$errorHandlerResponse/ctx:fault</con3:path>
                </con3:param>
              </con3:xqueryTransform>
            </con3:expr>
          </con3:assign>
          <con3:wsCallout>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7d52</con2:id>
            <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/formatlogmessage/proxyservice/FormatLogMessage12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>formatLogMessage</con3:operation>
            <con3:request>
              <con3:body>$formatLogMessageRequest</con3:body>
              <con3:header>$header</con3:header>
            </con3:request>
            <con3:response>
              <con3:body>formatLogMessageResponse</con3:body>
            </con3:response>
            <con3:requestTransform>
              <con3:assign varName="formatLogMessageRequest">
                <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7d53</con2:id>
                <con3:expr>
                  <con2:xqueryText><![CDATA[<for:formatLogMessageRequest>
    <log:LogMessage>
        <log:Timestamp>{fn:data(fn:current-dateTime())}</log:Timestamp>
        <log:LogType>{'ERROR'}</log:LogType>
        <log:MessageCode>{data($errorHandlerRequest/faul:messageCode)}</log:MessageCode>
        <log:MessageParameters>
            {$localMessageParameters/@* , $localMessageParameters/node()}
        </log:MessageParameters>
        <err:ErrorInfo>
            {$errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/@* , $errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/node() }
        </err:ErrorInfo>
    </log:LogMessage>
</for:formatLogMessageRequest>]]></con2:xqueryText>
                </con3:expr>
              </con3:assign>
            </con3:requestTransform>
            <con3:responseTransform/>
          </con3:wsCallout>
          <con1:log>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7d51</con2:id>
            <con1:logLevel>warning</con1:logLevel>
            <con1:expr>
              <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)</con3:xqueryText>
            </con1:expr>
            <con1:message>Erro</con1:message>
          </con1:log>
          <con3:wsCallout>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7d4f</con2:id>
            <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/alert/proxyservice/Alert12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>alert</con3:operation>
            <con3:request>
              <con3:body>$alertRequest</con3:body>
              <con3:header>$header</con3:header>
            </con3:request>
            <con3:response>
              <con3:body>alertResponse</con3:body>
            </con3:response>
            <con3:requestTransform>
              <con3:assign varName="alertRequest">
                <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7d50</con2:id>
                <con3:expr>
                  <con2:xqueryText><![CDATA[<alert:alertRequest>
    <aler:Timestamp>{data(fn:current-dateTime())}</aler:Timestamp>
    <aler:Message>{fn:data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)}</aler:Message>
    <aler:ServiceSeverityLevel>{'LEVEL1'}</aler:ServiceSeverityLevel>
    <nid:NidDomain>{'NETARCHITECTURE'}</nid:NidDomain>
    <abe:NidAbeLevel>{'SECURITY'}</abe:NidAbeLevel>
    <aler:ExceptionClassification>{fn:data($errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/err:ExceptionClassification)}</aler:ExceptionClassification>
</alert:alertRequest>]]></con2:xqueryText>
                </con3:expr>
              </con3:assign>
            </con3:requestTransform>
            <con3:responseTransform/>
          </con3:wsCallout>
          <con3:Error>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7d4e</con2:id>
            <con3:errCode>LOCAL_FAULT</con3:errCode>
          </con3:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="PipelinePairNodeDefault_response"/>
    <con:pipeline type="request" name="PipelinePairNodeRetrieveCredential_request">
      <con:stage name="LogRequest">
        <con2:context xmlns:con2="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"/>
        <con2:actions xmlns:con2="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con3:log xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config">
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-73a6</con4:id>
            <con3:logLevel>info</con3:logLevel>
            <con3:expr>
              <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$header</con4:xqueryText>
            </con3:expr>
            <con3:message>header</con3:message>
          </con3:log>
          <con3:log xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config">
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-73a5</con4:id>
            <con3:logLevel>info</con3:logLevel>
            <con3:expr>
              <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$body</con4:xqueryText>
            </con3:expr>
            <con3:message>body</con3:message>
          </con3:log>
        </con2:actions>
      </con:stage>
      <con:stage name="ValidateRequestSchema">
        <con:context xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/SidServiceV1" prefix="sid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityApplication" prefix="sec" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" prefix="app" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsAuthenticationNetV1" prefix="app1" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con4:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata" prefix="met" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityAuthorities" prefix="sec1" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con1:validate>
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-6be2</con5:id>
            <con1:schema ref="canonicalmodel/nid/v1/netarchitecture/common/Metadata"/>
            <con1:schemaElement xmlns:met="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata">met:Metadata</con1:schemaElement>
            <con1:varName>header</con1:varName>
            <con1:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./met:Metadata</con5:xpathText>
            </con1:location>
          </con1:validate>
          <con1:validate>
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-6bc5</con5:id>
            <con1:schema ref="canonicalmodel/nid/v1/netarchitecture/security/SecurityAuthorities"/>
            <con1:schemaElement xmlns:sec="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityAuthorities">sec:SecurityAuthorities</con1:schemaElement>
            <con1:varName>header</con1:varName>
            <con1:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./sec1:SecurityAuthorities</con5:xpathText>
            </con1:location>
          </con1:validate>
          <con1:validate>
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-73a4</con4:id>
            <con1:wsdl ref="netarchitecture/security/credentialstoreosb/wsdl/proxy/CredentialStoreOSBV1"/>
            <con1:schemaElement xmlns:exem="http://www.netservicos.com.br/ExemploTratExcecaoV1" xmlns:sid="http://www.netservicos.com.br/SidServiceV1" xmlns:app="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" xmlns:app1="http://www.netservicos.com.br/ApplicationsAuthenticationNetV1" xmlns:cred="http://www.netservicos.com.br/CredentialStoreOSBV1">cred:retrieveCredentialRequest</con1:schemaElement>
            <con1:varName>body</con1:varName>
            <con1:location>
              <con4:xpathText xmlns:con4="http://www.bea.com/wli/sb/stages/config">./cred:retrieveCredentialRequest</con4:xpathText>
            </con1:location>
          </con1:validate>
        </con:actions>
      </con:stage>
      <con:stage name="TransformMetadataDefaults">
        <con:context xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="netheader" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata" prefix="met" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con1:replace varName="header" contents-only="false">
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-73a3</con4:id>
            <con1:location>
              <con3:xpathText xmlns:con3="http://www.bea.com/wli/sb/stages/config">./met:Metadata</con3:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="netarchitecture/transformation/xquery/TransformMetadataDefaultsXQuery"/>
                <con2:param name="tokenDefault">
                  <con2:path>fn-bea:uuid()</con2:path>
                </con2:param>
                <con2:param name="currentDateTime">
                  <con2:path>fn:current-dateTime()</con2:path>
                </con2:param>
                <con2:param name="vendorDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="metadataIN">
                  <con2:path>$header/met:Metadata</con2:path>
                </con2:param>
                <con2:param name="featureDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="serviceVersionDefault">
                  <con2:path>'1.0'</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:replace>
          <con1:assign varName="headerDefaults">
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7b78</con5:id>
            <con1:expr>
              <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$header</con5:xqueryText>
            </con1:expr>
          </con1:assign>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="PipelinePairNodeRetrieveCredential_response">
      <con:stage name="PrepareResponse">
        <con:context>
          <con2:userNsDecl namespace="http://www.netservicos.com.br/CredentialStoreV1" prefix="crs"/>
          <con2:userNsDecl namespace="java:br.com.netservicos.types" prefix="java"/>
          <con2:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem"/>
          <con2:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred"/>
        </con:context>
        <con:actions>
          <con3:replace varName="body" contents-only="true">
            <con2:id>_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-7f05</con2:id>
            <con3:location>
              <con2:xpathText>.</con2:xpathText>
            </con3:location>
            <con3:expr>
              <con2:xqueryText><![CDATA[<cred:retrieveCredentialResponse>
	<cred:username>{data($body/crs:retrieveCredentialResponse/crs:credential/java:Username)}</cred:username>
	<cred:password>{data($body/crs:retrieveCredentialResponse/crs:credential/java:Password)}</cred:password>
</cred:retrieveCredentialResponse>]]></con2:xqueryText>
            </con3:expr>
          </con3:replace>
          <con3:delete varName="header">
            <con2:id>_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-7f04</con2:id>
          </con3:delete>
        </con:actions>
      </con:stage>
      <con:stage name="ValidateResponseSchema">
        <con:context xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/SidServiceV1" prefix="sid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityApplication" prefix="sec" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" prefix="app" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsAuthenticationNetV1" prefix="app1" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con4:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con1:validate>
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-7bc1</con5:id>
            <con1:wsdl ref="netarchitecture/security/credentialstoreosb/wsdl/proxy/CredentialStoreOSBV1"/>
            <con1:schemaElement xmlns:exem="http://www.netservicos.com.br/ExemploTratExcecaoV1" xmlns:sid="http://www.netservicos.com.br/SidServiceV1" xmlns:app="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" xmlns:app1="http://www.netservicos.com.br/ApplicationsAuthenticationNetV1" xmlns:cred="http://www.netservicos.com.br/CredentialStoreOSBV1">cred:retrieveCredentialResponse</con1:schemaElement>
            <con1:varName>body</con1:varName>
            <con1:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./cred:retrieveCredentialResponse</con5:xpathText>
            </con1:location>
          </con1:validate>
        </con:actions>
      </con:stage>
      <con:stage name="LogResponse">
        <con4:context xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config"/>
        <con4:actions xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
          <con5:log xmlns:con5="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id>_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-7332</con2:id>
            <con5:logLevel>info</con5:logLevel>
            <con5:expr>
              <con2:xqueryText>$header</con2:xqueryText>
            </con5:expr>
            <con5:message>header</con5:message>
          </con5:log>
          <con5:log xmlns:con5="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id>_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-7331</con2:id>
            <con5:logLevel>info</con5:logLevel>
            <con5:expr>
              <con2:xqueryText>$body</con2:xqueryText>
            </con5:expr>
            <con5:message>body</con5:message>
          </con5:log>
        </con4:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="request" name="PipelinePairNodeUpdateCredential_request">
      <con:stage name="LogRequest">
        <con2:context xmlns:con2="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"/>
        <con2:actions xmlns:con2="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con3:log xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config">
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-722b</con4:id>
            <con3:logLevel>info</con3:logLevel>
            <con3:expr>
              <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$header</con4:xqueryText>
            </con3:expr>
            <con3:message>header</con3:message>
          </con3:log>
          <con3:log xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config">
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-722a</con4:id>
            <con3:logLevel>info</con3:logLevel>
            <con3:expr>
              <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$body</con4:xqueryText>
            </con3:expr>
            <con3:message>body</con3:message>
          </con3:log>
        </con2:actions>
      </con:stage>
      <con:stage name="ValidateRequestSchema">
        <con:context xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/SidServiceV1" prefix="sid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityApplication" prefix="sec" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" prefix="app" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsAuthenticationNetV1" prefix="app1" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con4:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata" prefix="met" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityAuthorities" prefix="sec1" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con1:validate>
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-6b87</con5:id>
            <con1:schema ref="canonicalmodel/nid/v1/netarchitecture/common/Metadata"/>
            <con1:schemaElement xmlns:met="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata">met:Metadata</con1:schemaElement>
            <con1:varName>header</con1:varName>
            <con1:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./met:Metadata</con5:xpathText>
            </con1:location>
          </con1:validate>
          <con1:validate>
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-6b8a</con5:id>
            <con1:schema ref="canonicalmodel/nid/v1/netarchitecture/security/SecurityAuthorities"/>
            <con1:schemaElement xmlns:sec="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityAuthorities">sec:SecurityAuthorities</con1:schemaElement>
            <con1:varName>header</con1:varName>
            <con1:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./sec1:SecurityAuthorities</con5:xpathText>
            </con1:location>
          </con1:validate>
          <con1:validate>
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-7229</con4:id>
            <con1:wsdl ref="netarchitecture/security/credentialstoreosb/wsdl/proxy/CredentialStoreOSBV1"/>
            <con1:schemaElement xmlns:exem="http://www.netservicos.com.br/ExemploTratExcecaoV1" xmlns:sid="http://www.netservicos.com.br/SidServiceV1" xmlns:app="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" xmlns:app1="http://www.netservicos.com.br/ApplicationsAuthenticationNetV1" xmlns:cred="http://www.netservicos.com.br/CredentialStoreOSBV1">cred:updateCredentialRequest</con1:schemaElement>
            <con1:varName>body</con1:varName>
            <con1:location>
              <con4:xpathText xmlns:con4="http://www.bea.com/wli/sb/stages/config">./cred:updateCredentialRequest</con4:xpathText>
            </con1:location>
          </con1:validate>
        </con:actions>
      </con:stage>
      <con:stage name="TransformMetadataDefaults">
        <con:context xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="netheader" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata" prefix="met" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con1:replace varName="header" contents-only="false">
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-7228</con4:id>
            <con1:location>
              <con3:xpathText xmlns:con3="http://www.bea.com/wli/sb/stages/config">./met:Metadata</con3:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="netarchitecture/transformation/xquery/TransformMetadataDefaultsXQuery"/>
                <con2:param name="tokenDefault">
                  <con2:path>fn-bea:uuid()</con2:path>
                </con2:param>
                <con2:param name="currentDateTime">
                  <con2:path>fn:current-dateTime()</con2:path>
                </con2:param>
                <con2:param name="vendorDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="metadataIN">
                  <con2:path>$header/met:Metadata</con2:path>
                </con2:param>
                <con2:param name="featureDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="serviceVersionDefault">
                  <con2:path>'1.0'</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:replace>
          <con1:assign varName="headerDefaults">
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7b3f</con5:id>
            <con1:expr>
              <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$header</con5:xqueryText>
            </con1:expr>
          </con1:assign>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="PipelinePairNodeUpdateCredential_response">
      <con:stage name="PrepareResponse">
        <con:context>
          <con2:userNsDecl namespace="http://www.netservicos.com.br/CredentialStoreV1" prefix="crs"/>
          <con2:userNsDecl namespace="java:br.com.netservicos.types" prefix="java"/>
          <con2:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem"/>
          <con2:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred"/>
        </con:context>
        <con:actions>
          <con3:replace varName="body" contents-only="true">
            <con2:id>_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-7aa5</con2:id>
            <con3:location>
              <con2:xpathText>.</con2:xpathText>
            </con3:location>
            <con3:expr>
              <con2:xqueryText>&lt;cred:updateCredentialResponse/></con2:xqueryText>
            </con3:expr>
          </con3:replace>
          <con3:delete varName="header">
            <con2:id>_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-7aa4</con2:id>
          </con3:delete>
        </con:actions>
      </con:stage>
      <con:stage name="ValidateResponseSchema">
        <con:context xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/SidServiceV1" prefix="sid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityApplication" prefix="sec" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" prefix="app" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsAuthenticationNetV1" prefix="app1" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con4:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
          <con1:validate>
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-7a35</con5:id>
            <con1:wsdl ref="netarchitecture/security/credentialstoreosb/wsdl/proxy/CredentialStoreOSBV1"/>
            <con1:schemaElement xmlns:exem="http://www.netservicos.com.br/ExemploTratExcecaoV1" xmlns:sid="http://www.netservicos.com.br/SidServiceV1" xmlns:app="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" xmlns:app1="http://www.netservicos.com.br/ApplicationsAuthenticationNetV1" xmlns:cred="http://www.netservicos.com.br/CredentialStoreOSBV1">cred:updateCredentialResponse</con1:schemaElement>
            <con1:varName>body</con1:varName>
            <con1:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./cred:updateCredentialResponse</con5:xpathText>
            </con1:location>
          </con1:validate>
        </con:actions>
      </con:stage>
      <con:stage name="LogResponse">
        <con4:context xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config"/>
        <con4:actions xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con4="http://www.bea.com/wli/sb/pipeline/config">
          <con5:log xmlns:con5="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id>_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-7227</con2:id>
            <con5:logLevel>info</con5:logLevel>
            <con5:expr>
              <con2:xqueryText>$header</con2:xqueryText>
            </con5:expr>
            <con5:message>header</con5:message>
          </con5:log>
          <con5:log xmlns:con5="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id>_ActionId-1542298499873280340--4d2ed4d9.13a415606e7.-7226</con2:id>
            <con5:logLevel>info</con5:logLevel>
            <con5:expr>
              <con2:xqueryText>$body</con2:xqueryText>
            </con5:expr>
            <con5:message>body</con5:message>
          </con5:log>
        </con4:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-4558025622620199009-51cb67ed.13a885a62a5.-7ae8">
      <con:stage name="ErrorHandlerRouteNodeToCredentialStore12BSV1EJB_UpdateCredential">
        <con:context>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/FormatLogMessageV1" prefix="for" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Logging" prefix="log" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/FaultHandlerV1" prefix="faul" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/fault/ErrorInfo" prefix="err" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/fault/ValidationFault" prefix="val" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/AlertV1" prefix="alert" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Alert" prefix="aler" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidAbeLevel" prefix="abe" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidDomain" prefix="nid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con2:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred"/>
        </con:context>
        <con:actions>
          <con3:assign varName="localMessageParameters">
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-79dc</con2:id>
            <con3:expr>
              <con2:xqueryText><![CDATA[<log:MessageParameters>
      <log:Value>{'updateCredential'}</log:Value>
      <log:Value>{'CredentialStore12BSV1EJB'}</log:Value>
</log:MessageParameters>]]></con2:xqueryText>
            </con3:expr>
          </con3:assign>
          <con3:assign varName="errorHandlerRequest">
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-79db</con2:id>
            <con3:expr>
              <con2:xqueryTransform>
                <con2:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/MapFaultHandlerReqXQuery"/>
                <con2:param name="validationMessages">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'netarchitecture/security/credentialstoreosb/proxyservice/CredentialStoreOSB12V1LCL.BranchNode.RouteNodeToCredentialStore12BSV1EJB_RetrieveCredential'</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>data($fault/ctx:details)</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'OSB-NETARCHITECTURE-00019'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="additionalInformation">
                  <con2:path>$null</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con3:expr>
          </con3:assign>
          <con3:wsCallout>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-79da</con2:id>
            <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/fault/faulthandler/proxyservice/FaultHandler12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>faultHandler</con3:operation>
            <con3:request>
              <con3:body>$errorHandlerRequest</con3:body>
              <con3:header>$header</con3:header>
            </con3:request>
            <con3:response>
              <con3:body>errorHandlerResponse</con3:body>
            </con3:response>
            <con3:requestTransform/>
            <con3:responseTransform/>
          </con3:wsCallout>
          <con3:assign varName="customFault">
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-79d9</con2:id>
            <con3:expr>
              <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                <con3:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/TransformOSBFaultToRuntimeFaultXQuery"/>
                <con3:param name="fault">
                  <con3:path>$errorHandlerResponse/ctx:fault</con3:path>
                </con3:param>
              </con3:xqueryTransform>
            </con3:expr>
          </con3:assign>
          <con3:wsCallout>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-79d7</con2:id>
            <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/formatlogmessage/proxyservice/FormatLogMessage12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>formatLogMessage</con3:operation>
            <con3:request>
              <con3:body>$formatLogMessageRequest</con3:body>
              <con3:header>$header</con3:header>
            </con3:request>
            <con3:response>
              <con3:body>formatLogMessageResponse</con3:body>
            </con3:response>
            <con3:requestTransform>
              <con3:assign varName="formatLogMessageRequest">
                <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-79d8</con2:id>
                <con3:expr>
                  <con2:xqueryText><![CDATA[<for:formatLogMessageRequest>
    <log:LogMessage>
        <log:Timestamp>{fn:data(fn:current-dateTime())}</log:Timestamp>
        <log:LogType>{'ERROR'}</log:LogType>
        <log:MessageCode>{data($errorHandlerRequest/faul:messageCode)}</log:MessageCode>
        <log:MessageParameters>
            {$localMessageParameters/@* , $localMessageParameters/node()}
        </log:MessageParameters>
        <err:ErrorInfo>
            {$errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/@* , $errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/node() }
        </err:ErrorInfo>
    </log:LogMessage>
</for:formatLogMessageRequest>]]></con2:xqueryText>
                </con3:expr>
              </con3:assign>
            </con3:requestTransform>
            <con3:responseTransform/>
          </con3:wsCallout>
          <con1:log>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-79d6</con2:id>
            <con1:logLevel>warning</con1:logLevel>
            <con1:expr>
              <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)</con3:xqueryText>
            </con1:expr>
            <con1:message>Erro</con1:message>
          </con1:log>
          <con3:wsCallout>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-79d4</con2:id>
            <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/alert/proxyservice/Alert12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>alert</con3:operation>
            <con3:request>
              <con3:body>$alertRequest</con3:body>
              <con3:header>$header</con3:header>
            </con3:request>
            <con3:response>
              <con3:body>alertResponse</con3:body>
            </con3:response>
            <con3:requestTransform>
              <con3:assign varName="alertRequest">
                <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-79d5</con2:id>
                <con3:expr>
                  <con2:xqueryText><![CDATA[<alert:alertRequest>
    <aler:Timestamp>{data(fn:current-dateTime())}</aler:Timestamp>
    <aler:Message>{fn:data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)}</aler:Message>
    <aler:ServiceSeverityLevel>{'LEVEL1'}</aler:ServiceSeverityLevel>
    <nid:NidDomain>{'NETARCHITECTURE'}</nid:NidDomain>
    <abe:NidAbeLevel>{'SECURITY'}</abe:NidAbeLevel>
    <aler:ExceptionClassification>{fn:data($errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/err:ExceptionClassification)}</aler:ExceptionClassification>
</alert:alertRequest>]]></con2:xqueryText>
                </con3:expr>
              </con3:assign>
            </con3:requestTransform>
            <con3:responseTransform/>
          </con3:wsCallout>
          <con3:Error>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-79d3</con2:id>
            <con3:errCode>LOCAL_FAULT</con3:errCode>
          </con3:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-4558025622620199009-51cb67ed.13a885a62a5.-7ae7">
      <con:stage name="ErrorHandlerRouteNodeToCredentialStore12BSV1EJB_RetrieveCredential">
        <con:context>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/FormatLogMessageV1" prefix="for" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Logging" prefix="log" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/FaultHandlerV1" prefix="faul" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/fault/ErrorInfo" prefix="err" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/fault/ValidationFault" prefix="val" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/AlertV1" prefix="alert" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Alert" prefix="aler" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidAbeLevel" prefix="abe" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidDomain" prefix="nid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con2:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred"/>
        </con:context>
        <con:actions>
          <con3:assign varName="localMessageParameters">
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7a66</con2:id>
            <con3:expr>
              <con2:xqueryText><![CDATA[<log:MessageParameters>
      <log:Value>{'retrieveCredential'}</log:Value>
      <log:Value>{'CredentialStore12BSV1EJB'}</log:Value>
</log:MessageParameters>]]></con2:xqueryText>
            </con3:expr>
          </con3:assign>
          <con3:assign varName="errorHandlerRequest">
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7a65</con2:id>
            <con3:expr>
              <con2:xqueryTransform>
                <con2:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/MapFaultHandlerReqXQuery"/>
                <con2:param name="validationMessages">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'netarchitecture/security/credentialstoreosb/proxyservice/CredentialStoreOSB12V1LCL.BranchNode.RouteNodeToCredentialStore12BSV1EJB_RetrieveCredential'</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>data($fault/ctx:details)</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'OSB-NETARCHITECTURE-00019'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="additionalInformation">
                  <con2:path>$null</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con3:expr>
          </con3:assign>
          <con3:wsCallout>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7a64</con2:id>
            <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/fault/faulthandler/proxyservice/FaultHandler12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>faultHandler</con3:operation>
            <con3:request>
              <con3:body>$errorHandlerRequest</con3:body>
              <con3:header>$headerDefaults</con3:header>
            </con3:request>
            <con3:response>
              <con3:body>errorHandlerResponse</con3:body>
            </con3:response>
            <con3:requestTransform/>
            <con3:responseTransform/>
          </con3:wsCallout>
          <con3:assign varName="customFault">
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7a63</con2:id>
            <con3:expr>
              <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                <con3:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/TransformOSBFaultToRuntimeFaultXQuery"/>
                <con3:param name="fault">
                  <con3:path>$errorHandlerResponse/ctx:fault</con3:path>
                </con3:param>
              </con3:xqueryTransform>
            </con3:expr>
          </con3:assign>
          <con3:wsCallout>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7a61</con2:id>
            <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/formatlogmessage/proxyservice/FormatLogMessage12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>formatLogMessage</con3:operation>
            <con3:request>
              <con3:body>$formatLogMessageRequest</con3:body>
              <con3:header>$headerDefaults</con3:header>
            </con3:request>
            <con3:response>
              <con3:body>formatLogMessageResponse</con3:body>
            </con3:response>
            <con3:requestTransform>
              <con3:assign varName="formatLogMessageRequest">
                <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7a62</con2:id>
                <con3:expr>
                  <con2:xqueryText><![CDATA[<for:formatLogMessageRequest>
    <log:LogMessage>
        <log:Timestamp>{fn:data(fn:current-dateTime())}</log:Timestamp>
        <log:LogType>{'ERROR'}</log:LogType>
        <log:MessageCode>{data($errorHandlerRequest/faul:messageCode)}</log:MessageCode>
        <log:MessageParameters>
            {$localMessageParameters/@* , $localMessageParameters/node()}
        </log:MessageParameters>
        <err:ErrorInfo>
            {$errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/@* , $errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/node() }
        </err:ErrorInfo>
    </log:LogMessage>
</for:formatLogMessageRequest>]]></con2:xqueryText>
                </con3:expr>
              </con3:assign>
            </con3:requestTransform>
            <con3:responseTransform/>
          </con3:wsCallout>
          <con1:log>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7a60</con2:id>
            <con1:logLevel>warning</con1:logLevel>
            <con1:expr>
              <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)</con3:xqueryText>
            </con1:expr>
            <con1:message>Erro</con1:message>
          </con1:log>
          <con3:wsCallout>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7a5e</con2:id>
            <con3:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/alert/proxyservice/Alert12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con3:operation>alert</con3:operation>
            <con3:request>
              <con3:body>$alertRequest</con3:body>
              <con3:header>$headerDefaults</con3:header>
            </con3:request>
            <con3:response>
              <con3:body>alertResponse</con3:body>
            </con3:response>
            <con3:requestTransform>
              <con3:assign varName="alertRequest">
                <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7a5f</con2:id>
                <con3:expr>
                  <con2:xqueryText><![CDATA[<alert:alertRequest>
    <aler:Timestamp>{data(fn:current-dateTime())}</aler:Timestamp>
    <aler:Message>{fn:data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)}</aler:Message>
    <aler:ServiceSeverityLevel>{'LEVEL1'}</aler:ServiceSeverityLevel>
    <nid:NidDomain>{'NETARCHITECTURE'}</nid:NidDomain>
    <abe:NidAbeLevel>{'SECURITY'}</abe:NidAbeLevel>
    <aler:ExceptionClassification>{fn:data($errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/err:ExceptionClassification)}</aler:ExceptionClassification>
</alert:alertRequest>]]></con2:xqueryText>
                </con3:expr>
              </con3:assign>
            </con3:requestTransform>
            <con3:responseTransform/>
          </con3:wsCallout>
          <con3:Error>
            <con2:id>_ActionId-4558025622620199009-51cb67ed.13a885a62a5.-7a5d</con2:id>
            <con3:errCode>LOCAL_FAULT</con3:errCode>
          </con3:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:flow>
      <con:branch-node type="operation" name="BranchNode">
        <con:context/>
        <con:branch-table>
          <con:branch name="retrieveCredential">
            <con:operator>equals</con:operator>
            <con:value/>
            <con:flow>
              <con:pipeline-node name="PipelinePairNodeRetrieveCredential">
                <con:request>PipelinePairNodeRetrieveCredential_request</con:request>
                <con:response>PipelinePairNodeRetrieveCredential_response</con:response>
              </con:pipeline-node>
              <con:route-node name="RouteNodeToCredentialStore12BSV1EJB_RetrieveCredential" error-handler="_onErrorHandler-4558025622620199009-51cb67ed.13a885a62a5.-7ae7">
                <con:context>
                  <con2:userNsDecl namespace="http://www.netservicos.com.br/CredentialStoreV1" prefix="crs"/>
                  <con2:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityAuthorities" prefix="sec"/>
                </con:context>
                <con:actions>
                  <con4:route>
                    <con2:id>_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-766e</con2:id>
                    <con4:service ref="netarchitecture/security/credentialstoreosb/businessservice/CredentialStore12BSV1EJB" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                    <con4:operation>retrieveCredential</con4:operation>
                    <con4:outboundTransform>
                      <con3:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con4="http://www.bea.com/wli/sb/typesystem/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config">
                        <con1:id>_ActionId-6409020861736209131--21277ddf.13e9043f195.-7fad</con1:id>
                        <con3:uriExpr>
                          <con1:xqueryText>'ejb:LOCAL.JNDIProvider:NetCredentialStore#br.com.netservicos.credentialstore.v1.CredentialStore'</con1:xqueryText>
                        </con3:uriExpr>
                      </con3:routing-options>
                      <con3:assign varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/routing/config">
                        <con2:id>_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-766c</con2:id>
                        <con3:expr>
                          <con2:xqueryText><![CDATA[<soap12-env:Body>
	<crs:retrieveCredential> 
		<crs:authority>{data($header/sec:SecurityAuthorities/sec:Authority)}</crs:authority> 
	</crs:retrieveCredential>
</soap12-env:Body>]]></con2:xqueryText>
                        </con3:expr>
                      </con3:assign>
                    </con4:outboundTransform>
                    <con4:responseTransform/>
                  </con4:route>
                </con:actions>
              </con:route-node>
            </con:flow>
          </con:branch>
          <con:branch name="updateCredential">
            <con:operator>equals</con:operator>
            <con:value/>
            <con:flow>
              <con:pipeline-node name="PipelinePairNodeUpdateCredential">
                <con:request>PipelinePairNodeUpdateCredential_request</con:request>
                <con:response>PipelinePairNodeUpdateCredential_response</con:response>
              </con:pipeline-node>
              <con:route-node name="RouteNodeToCredentialStore12BSV1EJB_UpdateCredential" error-handler="_onErrorHandler-4558025622620199009-51cb67ed.13a885a62a5.-7ae8">
                <con:context>
                  <con2:userNsDecl namespace="http://www.netservicos.com.br/CredentialStoreV1" prefix="crs"/>
                  <con2:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityAuthorities" prefix="sec"/>
                  <con2:userNsDecl namespace="java:br.com.netservicos.types" prefix="java"/>
                  <con2:userNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred"/>
                </con:context>
                <con:actions>
                  <con4:route>
                    <con2:id>_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-7522</con2:id>
                    <con4:service ref="netarchitecture/security/credentialstoreosb/businessservice/CredentialStore12BSV1EJB" xsi:type="ref:BusinessServiceRef" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                    <con4:operation>updateCredential</con4:operation>
                    <con4:outboundTransform>
                      <con3:routing-options xmlns:con2="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con4="http://www.bea.com/wli/sb/typesystem/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config">
                        <con1:id>_ActionId-6409020861736209131--21277ddf.13e9043f195.-7f58</con1:id>
                        <con3:uriExpr>
                          <con1:xqueryText>'ejb:LOCAL.JNDIProvider:NetCredentialStore#br.com.netservicos.credentialstore.v1.CredentialStore'</con1:xqueryText>
                        </con3:uriExpr>
                      </con3:routing-options>
                      <con3:assign varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/routing/config">
                        <con2:id>_ActionId-7443069835016335383--29efd0df.13a6ab616a4.-7521</con2:id>
                        <con3:expr>
                          <con2:xqueryText><![CDATA[<soap12-env:Body>
	<crs:updateCredential> 
		<crs:authority>{data($header/sec:SecurityAuthorities/sec:Authority)}</crs:authority> 
		<crs:credential> 
			<java:Username>{data($body/cred:updateCredentialRequest/cred:username)}</java:Username> 
			<java:Password>{data($body/cred:updateCredentialRequest/cred:password)}</java:Password> 
		</crs:credential> 
	</crs:updateCredential> 
</soap12-env:Body>]]></con2:xqueryText>
                        </con3:expr>
                      </con3:assign>
                    </con4:outboundTransform>
                    <con4:responseTransform/>
                  </con4:route>
                </con:actions>
              </con:route-node>
            </con:flow>
          </con:branch>
          <con:default-branch>
            <con:flow>
              <con:pipeline-node name="PipelinePairNodeDefault">
                <con:request>PipelinePairNodeDefault_request</con:request>
                <con:response>PipelinePairNodeDefault_response</con:response>
              </con:pipeline-node>
            </con:flow>
          </con:default-branch>
        </con:branch-table>
      </con:branch-node>
    </con:flow>
  </ser:router>
</xml-fragment>