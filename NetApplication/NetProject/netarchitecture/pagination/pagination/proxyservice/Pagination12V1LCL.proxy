<?xml version="1.0" encoding="UTF-8"?>
<xml-fragment xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:http="http://www.bea.com/wli/sb/transports/http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:con="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con2="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config">
  <ser:coreEntry isProxy="true" isEnabled="true">
    <ser:binding type="SOAP" isSoap12="true" xsi:type="con:SoapBindingType" xmlns:con="http://www.bea.com/wli/sb/services/bindings/config">
      <con:wsdl ref="netarchitecture/pagination/pagination/wsdl/proxy/PaginationV1"/>
      <con:binding>
        <con:name>PaginationV1BindingLCL</con:name>
        <con:namespace>http://www.netservicos.com.br/PaginationV1</con:namespace>
      </con:binding>
      <con:selector type="SOAP body"/>
    </ser:binding>
    <ser:monitoring isEnabled="false">
      <ser:aggregationInterval>10</ser:aggregationInterval>
      <ser:pipelineMonitoringLevel>Pipeline</ser:pipelineMonitoringLevel>
    </ser:monitoring>
    <ser:reporting>true</ser:reporting>
    <ser:logging isEnabled="true">
      <ser:logLevel>debug</ser:logLevel>
    </ser:logging>
    <ser:sla-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:sla-alerting>
    <ser:pipeline-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:pipeline-alerting>
    <ser:ws-policy>
      <ser:binding-mode>owsm-policy-bindings</ser:binding-mode>
    </ser:ws-policy>
  </ser:coreEntry>
  <ser:endpointConfig>
    <tran:provider-id>local</tran:provider-id>
    <tran:inbound>true</tran:inbound>
    <tran:inbound-properties/>
    <tran:all-headers>true</tran:all-headers>
  </ser:endpointConfig>
  <ser:router errorHandler="_onErrorHandler-831637908570605297--6b7366e4.13b41fb127e.-5205">
    <con:pipeline type="error" name="_onErrorHandler-831637908570605297--6b7366e4.13b41fb127e.-5205">
      <con:stage name="ErrorHandlerPipelinePairNode">
        <con:context xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
          <con1:userNsDecl namespace="http://www.netservicos.com.br/FaultHandlerV1" prefix="faul" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Message" prefix="coreschema" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Logging" prefix="log" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/FormatLogMessageV1" prefix="for" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/fault/ErrorInfo" prefix="err" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Alert" prefix="aler" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/AlertV1" prefix="alert" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidDomain" prefix="nid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidAbeLevel" prefix="abe" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata" prefix="met" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
          <con5:ifThenElse xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-517c</con5:id>
            <con5:case>
              <con5:condition>
                <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">empty($customFault)</con3:xqueryText>
              </con5:condition>
              <con5:actions>
                <con5:assign varName="localMessageParameters">
                  <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-517b</con5:id>
                  <con5:expr>
                    <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config"><![CDATA[<log:MessageParameters>
      <log:Value>{$operation}</log:Value>
      <log:Value>{'Pagination12V1LCL'}</log:Value>
</log:MessageParameters>]]></con6:xqueryText>
                  </con5:expr>
                </con5:assign>
                <con5:assign varName="errorHandlerRequest">
                  <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-517a</con5:id>
                  <con5:expr>
                    <con5:xqueryTransform xmlns:con5="http://www.bea.com/wli/sb/stages/config">
                      <con5:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/MapFaultHandlerReqXQuery"/>
                      <con5:param name="validationMessages">
                        <con5:path>$null</con5:path>
                      </con5:param>
                      <con5:param name="messageParameters">
                        <con5:path>$localMessageParameters</con5:path>
                      </con5:param>
                      <con5:param name="currentFault">
                        <con5:path>$fault</con5:path>
                      </con5:param>
                      <con5:param name="currentBody">
                        <con5:path>$body</con5:path>
                      </con5:param>
                      <con5:param name="accessResourceName">
                        <con5:path>'netarchitecture/pagination/pagination/proxyservice/Pagination12V1LCL.PipelinePairNode'</con5:path>
                      </con5:param>
                      <con5:param name="exceptionStackTrace">
                        <con5:path>data($fault/ctx:details)</con5:path>
                      </con5:param>
                      <con5:param name="messageCode">
                        <con5:path>'OSB-NETARCHITECTURE-00018'</con5:path>
                      </con5:param>
                      <con5:param name="callResponse">
                        <con5:path>$null</con5:path>
                      </con5:param>
                      <con5:param name="exceptionClassification">
                        <con5:path>'CLASSIFICATION_UNEXPECTED'</con5:path>
                      </con5:param>
                      <con5:param name="additionalInformation">
                        <con5:path>$null</con5:path>
                      </con5:param>
                    </con5:xqueryTransform>
                  </con5:expr>
                </con5:assign>
                <con5:assign varName="headerRequest">
                  <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-5179</con5:id>
                  <con5:expr>
                    <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">if ($headerDefaults) then
	$headerDefaults
else
	$header</con5:xqueryText>
                  </con5:expr>
                </con5:assign>
                <con5:wsCallout>
                  <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-5178</con5:id>
                  <con5:service xsi:type="ref:ProxyRef" ref="netarchitecture/fault/faulthandler/proxyservice/FaultHandler12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con5:operation>faultHandler</con5:operation>
                  <con5:request>
                    <con5:body>$errorHandlerRequest</con5:body>
                    <con5:header>$headerRequest</con5:header>
                  </con5:request>
                  <con5:response>
                    <con5:body>errorHandlerResponse</con5:body>
                  </con5:response>
                  <con5:requestTransform/>
                  <con5:responseTransform/>
                </con5:wsCallout>
                <con5:assign varName="customFault">
                  <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-5177</con5:id>
                  <con5:expr>
                    <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                      <con3:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/TransformOSBFaultToRuntimeFaultXQuery"/>
                      <con3:param name="fault">
                        <con3:path>$errorHandlerResponse/ctx:fault</con3:path>
                      </con3:param>
                    </con3:xqueryTransform>
                  </con5:expr>
                </con5:assign>
                <con5:wsCallout>
                  <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-5175</con5:id>
                  <con5:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/formatlogmessage/proxyservice/FormatLogMessage12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con5:operation>formatLogMessage</con5:operation>
                  <con5:request>
                    <con5:body>$formatLogMessageRequest</con5:body>
                    <con5:header>$headerRequest</con5:header>
                  </con5:request>
                  <con5:response>
                    <con5:body>formatLogMessageResponse</con5:body>
                  </con5:response>
                  <con5:requestTransform>
                    <con5:assign varName="formatLogMessageRequest">
                      <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-5176</con5:id>
                      <con5:expr>
                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config"><![CDATA[<for:formatLogMessageRequest>
    <log:LogMessage>
        <log:Timestamp>{fn:data(fn:current-dateTime())}</log:Timestamp>
        <log:LogType>{'ERROR'}</log:LogType>
        <log:MessageCode>{data($errorHandlerRequest/faul:messageCode)}</log:MessageCode>
        <log:MessageParameters>
            {$localMessageParameters/@* , $localMessageParameters/node()}
        </log:MessageParameters>
        <err:ErrorInfo>
            {$errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/@* , $errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/node() }
        </err:ErrorInfo>
    </log:LogMessage>
</for:formatLogMessageRequest>]]></con3:xqueryText>
                      </con5:expr>
                    </con5:assign>
                  </con5:requestTransform>
                  <con5:responseTransform/>
                </con5:wsCallout>
                <con1:log>
                  <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-5174</con5:id>
                  <con1:logLevel>error</con1:logLevel>
                  <con1:expr>
                    <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)</con3:xqueryText>
                  </con1:expr>
                  <con1:message>Erro</con1:message>
                </con1:log>
                <con5:wsCallout>
                  <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-5172</con5:id>
                  <con5:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/alert/proxyservice/Alert12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con5:operation>alert</con5:operation>
                  <con5:request>
                    <con5:body>$alertRequest</con5:body>
                    <con5:header>$headerRequest</con5:header>
                  </con5:request>
                  <con5:response>
                    <con5:body>alertResponse</con5:body>
                  </con5:response>
                  <con5:requestTransform>
                    <con5:assign varName="alertRequest">
                      <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-5173</con5:id>
                      <con5:expr>
                        <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config"><![CDATA[<alert:alertRequest>
    <aler:Timestamp>{data(fn:current-dateTime())}</aler:Timestamp>
    <aler:Message>{fn:data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)}</aler:Message>
    <aler:ServiceSeverityLevel>{'LEVEL1'}</aler:ServiceSeverityLevel>
    <nid:NidDomain>{'NETARCHITECTURE'}</nid:NidDomain>
    <abe:NidAbeLevel>{'PAGINATION'}</abe:NidAbeLevel>
    <aler:ExceptionClassification>{fn:data($errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/err:ExceptionClassification)}</aler:ExceptionClassification>
</alert:alertRequest>]]></con6:xqueryText>
                      </con5:expr>
                    </con5:assign>
                  </con5:requestTransform>
                  <con5:responseTransform/>
                </con5:wsCallout>
              </con5:actions>
            </con5:case>
            <con5:default/>
          </con5:ifThenElse>
          <con5:replace varName="body" contents-only="true" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-5171</con5:id>
            <con5:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">.</con5:xpathText>
            </con5:location>
            <con5:expr>
              <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$customFault</con3:xqueryText>
            </con5:expr>
          </con5:replace>
          <con5:delete varName="header" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-5170</con5:id>
          </con5:delete>
          <con3:reply isError="true" xmlns:con3="http://www.bea.com/wli/sb/stages/config">
            <con3:id>_ActionId-831637908570605297--6b7366e4.13b41fb127e.-516f</con3:id>
          </con3:reply>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="request" name="PipelinePairNode_request">
      <con:stage name="LogRequest">
        <con2:context xmlns:con2="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config"/>
        <con2:actions xmlns:con2="http://www.bea.com/wli/sb/pipeline/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
          <con3:log xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config">
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-510f</con5:id>
            <con3:logLevel>info</con3:logLevel>
            <con3:expr>
              <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$header</con4:xqueryText>
            </con3:expr>
            <con3:message>header</con3:message>
          </con3:log>
          <con3:log xmlns:con3="http://www.bea.com/wli/sb/stages/logging/config">
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-510e</con5:id>
            <con3:logLevel>info</con3:logLevel>
            <con3:expr>
              <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">$body</con4:xqueryText>
            </con3:expr>
            <con3:message>body</con3:message>
          </con3:log>
        </con2:actions>
      </con:stage>
      <con:stage name="ValidateRequestSchema">
        <con:context xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/SidServiceV1" prefix="sid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityApplication" prefix="sec" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" prefix="app" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsAuthenticationNetV1" prefix="app1" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con4:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata" prefix="met" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityAuthorities" prefix="sec1" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/pagination/Pagination" prefix="pag" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/PaginationV1" prefix="pag1" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
          <con3:validate>
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-510d</con5:id>
            <con3:schema ref="canonicalmodel/nid/v1/netarchitecture/common/Metadata"/>
            <con3:schemaElement xmlns:met="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata">met:Metadata</con3:schemaElement>
            <con3:varName>header</con3:varName>
            <con3:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./met:Metadata</con5:xpathText>
            </con3:location>
          </con3:validate>
          <con3:validate>
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-3474108953279049102--2008cfed.13b4d007288.-7f2b</con5:id>
            <con3:schema ref="canonicalmodel/nid/v1/netarchitecture/pagination/Pagination"/>
            <con3:schemaElement xmlns:pag="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/pagination/Pagination">pag:Pagination</con3:schemaElement>
            <con3:varName>header</con3:varName>
            <con3:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./pag:Pagination</con5:xpathText>
            </con3:location>
          </con3:validate>
          <con3:validate>
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-6175948137003268946--4aa3f1ea.13b4d657012.-781a</con5:id>
            <con3:wsdl ref="netarchitecture/pagination/pagination/wsdl/proxy/PaginationV1"/>
            <con3:schemaElement xmlns:pag="http://www.netservicos.com.br/PaginationV1">pag:paginateRequest</con3:schemaElement>
            <con3:varName>body</con3:varName>
            <con3:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./pag1:paginateRequest</con5:xpathText>
            </con3:location>
          </con3:validate>
        </con:actions>
      </con:stage>
      <con:stage name="CalculateParameters">
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" prefix="app"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/PaginationV1" prefix="pag"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/pagination/Pagination" prefix="pag1"/>
        </con:context>
        <con:actions>
          <con2:ifThenElse>
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4c41</con1:id>
            <con2:case>
              <con2:condition>
                <con1:xqueryText>(:Verifica se foi informado um valor para MaxListSize diferente de 0:)
data($header/pag1:Pagination/pag1:MaxListSize) > 0</con1:xqueryText>
              </con2:condition>
              <con2:actions>
                <con2:assign varName="paginatedList">
                  <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4c40</con1:id>
                  <con2:expr>
                    <con1:xqueryText>(:Restringe o tamanho da lista de acordo com o valor informado em MaxListSize:)
&lt;paginatedList>
	{$body/pag:paginateRequest/*[position() >= 1
		and position() &lt;= (xs:integer(data($header/pag1:Pagination/pag1:MaxListSize)))]}
&lt;/paginatedList></con1:xqueryText>
                  </con2:expr>
                </con2:assign>
                <con2:assign varName="totalListCount ">
                  <con1:id>_ActionId-2782424601083652186-1d716c83.13df603b880.-7fc7</con1:id>
                  <con2:expr>
                    <con1:xqueryText>(:A quantidade total de registros será igual ao valor informado em MaxListSize:)
data($header/pag1:Pagination/pag1:MaxListSize)</con1:xqueryText>
                  </con2:expr>
                </con2:assign>
              </con2:actions>
            </con2:case>
            <con2:default>
              <con2:assign varName="paginatedList">
                <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4c3f</con1:id>
                <con2:expr>
                  <con1:xqueryText>(:Popula a lista com todos os valores informados na requisição:)
&lt;paginatedList>
	{$body/pag:paginateRequest/*}
&lt;/paginatedList></con1:xqueryText>
                </con2:expr>
              </con2:assign>
              <con2:assign varName="totalListCount">
                <con1:id>_ActionId-2782424601083652186-1d716c83.13df603b880.-7f8e</con1:id>
                <con2:expr>
                  <con1:xqueryText>(:A quantidade total de registros é o tamanho da lista não paginada informada:)
count($body/pag:paginateRequest/*)</con1:xqueryText>
                </con2:expr>
              </con2:assign>
            </con2:default>
          </con2:ifThenElse>
          <con2:assign varName="pageSize">
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4c3e</con1:id>
            <con2:expr>
              <con1:xqueryText>if (fn:data($header/pag1:Pagination/pag1:Page/pag1:Size) > 0) then 
	fn:data($header/pag1:Pagination/pag1:Page/pag1:Size)
else
	xs:integer('20')</con1:xqueryText>
            </con2:expr>
          </con2:assign>
          <con2:assign varName="pageNumber">
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4c3d</con1:id>
            <con2:expr>
              <con1:xqueryText>fn:data($header/pag1:Pagination/pag1:Page/pag1:Number)</con1:xqueryText>
            </con2:expr>
          </con2:assign>
          <con2:assign varName="pageCount">
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4c3c</con1:id>
            <con2:expr>
              <con1:xqueryText>if (fn:count($paginatedList/*) >= xs:integer($pageSize)) then
	if (xs:integer(xs:integer(fn:count($paginatedList/*)) mod xs:integer($pageSize)) > 0) then
		xs:integer(xs:integer(fn:count($paginatedList/*)) div xs:integer($pageSize) + 1)	
	else
		xs:integer(xs:integer(fn:count($paginatedList/*)) div xs:integer($pageSize))
else
	xs:integer('1')</con1:xqueryText>
            </con2:expr>
          </con2:assign>
          <con2:assign varName="action">
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4bad</con1:id>
            <con2:expr>
              <con1:xqueryText>data($header/pag1:Pagination/pag1:Page/pag1:Action)</con1:xqueryText>
            </con2:expr>
          </con2:assign>
        </con:actions>
      </con:stage>
      <con:stage name="ValidateRequestContent" errorHandler="_onErrorHandler-7377944730672438887--29de4611.13b66774f52.-4d50">
        <con:context/>
        <con:actions>
          <con1:ifThenElse xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7377944730672438887--29de4611.13b66774f52.-4d53</con4:id>
            <con1:case>
              <con1:condition>
                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">(xs:integer($pageNumber) eq 1) and ($action eq 'First' or $action eq 'Previous')</con4:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="posicaoPag">
                  <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7377944730672438887--29de4611.13b66774f52.-4b06</con4:id>
                  <con1:expr>
                    <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">'primeira'</con4:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7377944730672438887--29de4611.13b66774f52.-4388</con4:id>
                  <con1:errCode>OSB-NETARCHITECTURE-00021</con1:errCode>
                  <con1:message/>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">(xs:integer($pageNumber) eq xs:integer($pageCount)) 
and ($action eq 'Last' or $action eq 'Next')</con4:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="posicaoPag">
                  <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7377944730672438887--29de4611.13b66774f52.-4ab2</con4:id>
                  <con1:expr>
                    <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">'última'</con4:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7377944730672438887--29de4611.13b66774f52.-434f</con4:id>
                  <con1:errCode>OSB-NETARCHITECTURE-00021</con1:errCode>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con4:xqueryText xmlns:con4="http://www.bea.com/wli/sb/stages/config">(xs:integer($pageNumber) > xs:integer($pageCount))</con4:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:Error>
                  <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-7377944730672438887--29de4611.13b66774f52.-3501</con4:id>
                  <con1:errCode>OSB-NETARCHITECTURE-00022</con1:errCode>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:default/>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="TransformRemoveAttributes">
        <con:context/>
        <con:actions>
          <con1:replace varName="header" xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con4:id xmlns:con4="http://www.bea.com/wli/sb/stages/config">_ActionId-6509434051827818849-4c732813.13fe8ec294e.-7ee2</con4:id>
            <con1:location>
              <con3:xpathText xmlns:con3="http://www.bea.com/wli/sb/stages/config">.</con3:xpathText>
            </con1:location>
            <con1:expr>
              <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                <con3:resource ref="netarchitecture/transformation/xquery/TransformRemoveAttributesXQuery"/>
                <con3:param name="names">
                  <con3:path>'*'</con3:path>
                </con3:param>
                <con3:param name="nodes">
                  <con3:path>$header</con3:path>
                </con3:param>
              </con3:xqueryTransform>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
      <con:stage name="TransformMetadataDefaults">
        <con:context xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="netheader" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata" prefix="met" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
          <con3:replace varName="header" contents-only="false">
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-510a</con5:id>
            <con3:location>
              <con3:xpathText xmlns:con3="http://www.bea.com/wli/sb/stages/config">./met:Metadata</con3:xpathText>
            </con3:location>
            <con3:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="netarchitecture/transformation/xquery/TransformMetadataDefaultsXQuery"/>
                <con2:param name="tokenDefault">
                  <con2:path>fn-bea:uuid()</con2:path>
                </con2:param>
                <con2:param name="currentDateTime">
                  <con2:path>fn:current-dateTime()</con2:path>
                </con2:param>
                <con2:param name="vendorDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="metadataIN">
                  <con2:path>$header/met:Metadata</con2:path>
                </con2:param>
                <con2:param name="featureDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="serviceVersionDefault">
                  <con2:path>'1.0'</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con3:expr>
          </con3:replace>
          <con3:assign varName="headerDefaults">
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-6509434051827818849-4c732813.13fe8ec294e.-7edf</con5:id>
            <con3:expr>
              <con5:xqueryText xmlns:con5="http://www.bea.com/wli/sb/stages/config">$header</con5:xqueryText>
            </con3:expr>
          </con3:assign>
        </con:actions>
      </con:stage>
      <con:stage name="PaginateList">
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" prefix="app"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/PaginationV1" prefix="pag"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/pagination/Pagination" prefix="pag1"/>
        </con:context>
        <con:actions>
          <con2:ifThenElse>
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-50c7</con1:id>
            <con2:case>
              <con2:condition>
                <con1:xqueryText>(:A ação é Retrieve:)
$action eq 'Retrieve'</con1:xqueryText>
              </con2:condition>
              <con2:actions>
                <con2:assign varName="paginatedList">
                  <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-50aa</con1:id>
                  <con2:expr>
                    <con1:xqueryText>&lt;paginatedList>
	{$paginatedList/*[position() >= ((xs:integer($pageNumber) - 1) * xs:integer($pageSize)) + 1 
	and position() &lt;= (xs:integer($pageNumber) * xs:integer($pageSize))]}
&lt;/paginatedList></con1:xqueryText>
                  </con2:expr>
                </con2:assign>
              </con2:actions>
            </con2:case>
            <con2:case>
              <con2:condition>
                <con1:xqueryText>(:A ação é First:)
$action eq 'First'</con1:xqueryText>
              </con2:condition>
              <con2:actions>
                <con2:assign varName="paginatedList">
                  <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4fce</con1:id>
                  <con2:expr>
                    <con1:xqueryText>&lt;paginatedList>
	{$paginatedList/*[position() >= 1 and position() &lt;= xs:integer($pageSize)]}
&lt;/paginatedList></con1:xqueryText>
                  </con2:expr>
                </con2:assign>
              </con2:actions>
            </con2:case>
            <con2:case>
              <con2:condition>
                <con1:xqueryText>(:A ação é Last:)
$action eq 'Last'</con1:xqueryText>
              </con2:condition>
              <con2:actions>
                <con2:assign varName="paginatedList">
                  <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4f44</con1:id>
                  <con2:expr>
                    <con1:xqueryText>&lt;paginatedList>
	{$paginatedList/*[position() > (last() - xs:integer($pageSize)) 
		and position() &lt;= last()]}
&lt;/paginatedList></con1:xqueryText>
                  </con2:expr>
                </con2:assign>
              </con2:actions>
            </con2:case>
            <con2:case>
              <con2:condition>
                <con1:xqueryText>(:A ação é Previous:)
$action eq 'Previous'</con1:xqueryText>
              </con2:condition>
              <con2:actions>
                <con2:assign varName="paginatedList">
                  <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4f0c</con1:id>
                  <con2:expr>
                    <con1:xqueryText>&lt;paginatedList>
	{$paginatedList/*[position() >= ((xs:integer($pageNumber) - 2) * xs:integer($pageSize)) + 1 
	and position() &lt;= ((xs:integer($pageNumber)- 1) * xs:integer($pageSize))]}
&lt;/paginatedList></con1:xqueryText>
                  </con2:expr>
                </con2:assign>
              </con2:actions>
            </con2:case>
            <con2:case>
              <con2:condition>
                <con1:xqueryText>(:A ação é Next:)
$action eq 'Next'</con1:xqueryText>
              </con2:condition>
              <con2:actions>
                <con2:assign varName="paginatedList">
                  <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4eb8</con1:id>
                  <con2:expr>
                    <con1:xqueryText>&lt;paginatedList>
	{$paginatedList/*[position() >= (xs:integer($pageNumber) * xs:integer($pageSize)) + 1 
	and position() &lt;= ((xs:integer($pageNumber) + 1) * xs:integer($pageSize))]}
&lt;/paginatedList></con1:xqueryText>
                  </con2:expr>
                </con2:assign>
              </con2:actions>
            </con2:case>
            <con2:default/>
          </con2:ifThenElse>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="PipelinePairNode_response">
      <con:stage name="PrepareResponse">
        <con:context xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
          <con5:userNsDecl namespace="http://www.netservicos.com.br/CredentialStoreV1" prefix="crs" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/pagination/Pagination" prefix="pag1" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/Metadata" prefix="met" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/PaginationV1" prefix="pag" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/pagination/extension/PaginationExtension" prefix="pag2" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
          <con5:delete varName="header" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
            <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7377944730672438887--29de4611.13b66774f52.-715c</con6:id>
            <con5:location>
              <con6:xpathText xmlns:con6="http://www.bea.com/wli/sb/stages/config">./met:Metadata</con6:xpathText>
            </con5:location>
          </con5:delete>
          <con5:ifThenElse xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
            <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7132543927539522543--77b0d6e3.13e0eb25e11.-78ee</con6:id>
            <con5:case>
              <con5:condition>
                <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">exists($header/pag1:Pagination/pag1:TotalListCount)</con6:xqueryText>
              </con5:condition>
              <con5:actions>
                <con5:replace contents-only="true" varName="header">
                  <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7132543927539522543--77b0d6e3.13e0eb25e11.-78ed</con6:id>
                  <con5:location>
                    <con6:xpathText xmlns:con6="http://www.bea.com/wli/sb/stages/config">./pag1:Pagination/pag1:TotalListCount</con6:xpathText>
                  </con5:location>
                  <con5:expr>
                    <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">$totalListCount</con6:xqueryText>
                  </con5:expr>
                </con5:replace>
              </con5:actions>
            </con5:case>
            <con5:default>
              <con5:insert varName="header">
                <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7132543927539522543--77b0d6e3.13e0eb25e11.-78ec</con6:id>
                <con5:location>
                  <con6:xpathText xmlns:con6="http://www.bea.com/wli/sb/stages/config">./pag1:Pagination/pag1:MaxListSize</con6:xpathText>
                </con5:location>
                <con5:where>after</con5:where>
                <con5:expr>
                  <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">&lt;pag1:TotalListCount>{$totalListCount}&lt;/pag1:TotalListCount></con6:xqueryText>
                </con5:expr>
              </con5:insert>
            </con5:default>
          </con5:ifThenElse>
          <con5:ifThenElse xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
            <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7377944730672438887--29de4611.13b66774f52.-713f</con6:id>
            <con5:case>
              <con5:condition>
                <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">exists($header/pag1:Pagination/pag1:PageCount)</con6:xqueryText>
              </con5:condition>
              <con5:actions>
                <con5:replace contents-only="true" varName="header">
                  <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7377944730672438887--29de4611.13b66774f52.-7107</con6:id>
                  <con5:location>
                    <con6:xpathText xmlns:con6="http://www.bea.com/wli/sb/stages/config">./pag1:Pagination/pag1:PageCount</con6:xpathText>
                  </con5:location>
                  <con5:expr>
                    <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">$pageCount</con6:xqueryText>
                  </con5:expr>
                </con5:replace>
              </con5:actions>
            </con5:case>
            <con5:default>
              <con5:insert varName="header">
                <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7377944730672438887--29de4611.13b66774f52.-70cf</con6:id>
                <con5:location>
                  <con6:xpathText xmlns:con6="http://www.bea.com/wli/sb/stages/config">./pag1:Pagination/pag1:TotalListCount</con6:xpathText>
                </con5:location>
                <con5:where>after</con5:where>
                <con5:expr>
                  <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">&lt;pag1:PageCount>{$pageCount}&lt;/pag1:PageCount></con6:xqueryText>
                </con5:expr>
              </con5:insert>
            </con5:default>
          </con5:ifThenElse>
          <con5:replace varName="body" contents-only="true" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config">
            <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-6175948137003268946--4aa3f1ea.13b4d657012.-68d1</con6:id>
            <con5:location>
              <con6:xpathText xmlns:con6="http://www.bea.com/wli/sb/stages/config">.</con6:xpathText>
            </con5:location>
            <con5:expr>
              <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">&lt;pag:paginateResponse>
	{$paginatedList/*}
&lt;/pag:paginateResponse></con6:xqueryText>
            </con5:expr>
          </con5:replace>
        </con:actions>
      </con:stage>
      <con:stage name="ValidateResponseSchema">
        <con:context xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/SidServiceV1" prefix="sid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/security/SecurityApplication" prefix="sec" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsCredentialsNetV1" prefix="app" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ApplicationsAuthenticationNetV1" prefix="app1" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con4:varNsDecl namespace="http://www.netservicos.com.br/CredentialStoreOSBV1" prefix="cred" xmlns:con4="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/PaginationV1" prefix="pag" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
          <con5:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/pagination/Pagination" prefix="pag1" xmlns:con5="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config">
          <con3:validate>
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-6175948137003268946--4aa3f1ea.13b4d657012.-78e1</con5:id>
            <con3:schema ref="canonicalmodel/nid/v1/netarchitecture/pagination/Pagination"/>
            <con3:schemaElement xmlns:pag="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/pagination/Pagination">pag:Pagination</con3:schemaElement>
            <con3:varName>header</con3:varName>
            <con3:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./pag1:Pagination</con5:xpathText>
            </con3:location>
          </con3:validate>
          <con3:validate>
            <con5:id xmlns:con5="http://www.bea.com/wli/sb/stages/config">_ActionId-6175948137003268946--4aa3f1ea.13b4d657012.-78a7</con5:id>
            <con3:wsdl ref="netarchitecture/pagination/pagination/wsdl/proxy/PaginationV1"/>
            <con3:schemaElement xmlns:pag="http://www.netservicos.com.br/PaginationV1">pag:paginateResponse</con3:schemaElement>
            <con3:varName>body</con3:varName>
            <con3:location>
              <con5:xpathText xmlns:con5="http://www.bea.com/wli/sb/stages/config">./pag:paginateResponse</con5:xpathText>
            </con3:location>
          </con3:validate>
        </con:actions>
      </con:stage>
      <con:stage name="LogResponse">
        <con4:context xmlns:con4="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config"/>
        <con4:actions xmlns:con4="http://www.bea.com/wli/sb/pipeline/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
          <con5:log xmlns:con5="http://www.bea.com/wli/sb/stages/logging/config">
            <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-508f</con6:id>
            <con5:logLevel>info</con5:logLevel>
            <con5:expr>
              <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">$header</con6:xqueryText>
            </con5:expr>
            <con5:message>header</con5:message>
          </con5:log>
          <con5:log xmlns:con5="http://www.bea.com/wli/sb/stages/logging/config">
            <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-831637908570605297--6b7366e4.13b41fb127e.-508e</con6:id>
            <con5:logLevel>info</con5:logLevel>
            <con5:expr>
              <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config">$body</con6:xqueryText>
            </con5:expr>
            <con5:message>body</con5:message>
          </con5:log>
        </con4:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-7377944730672438887--29de4611.13b66774f52.-4d50">
      <con:stage name="ErrorHandlerValidateRequestContent">
        <con:context>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/FormatLogMessageV1" prefix="for" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Logging" prefix="log" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/FaultHandlerV1" prefix="faul" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/fault/ErrorInfo" prefix="err" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/fault/ValidationFault" prefix="val" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/AlertV1" prefix="alert" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/monitoring/Alert" prefix="aler" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidAbeLevel" prefix="abe" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:userNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/common/NidDomain" prefix="nid" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con3:varNsDecl namespace="http://www.netservicos.com.br/ExemploTratExcecaoV1" prefix="exem" xmlns:con3="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/canonicalmodel/nid/v1/netarchitecture/pagination/Pagination" prefix="pag"/>
        </con:context>
        <con:actions>
          <con5:assign varName="localMessageParameters" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con2="http://www.bea.com/wli/sb/stages/config" xmlns:con5="http://www.bea.com/wli/sb/stages/transform/config" xmlns:con4="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con6:id xmlns:con6="http://www.bea.com/wli/sb/stages/config">_ActionId-7377944730672438887--29de4611.13b66774f52.-4b3e</con6:id>
            <con5:expr>
              <con6:xqueryText xmlns:con6="http://www.bea.com/wli/sb/stages/config"><![CDATA[<log:MessageParameters>
      <log:Value>{$action}</log:Value>
      <log:Value>{$pageNumber}</log:Value>
      <log:Value>{$posicaoPag}</log:Value>      
</log:MessageParameters>]]></con6:xqueryText>
            </con5:expr>
          </con5:assign>
          <con2:assign varName="errorHandlerRequest">
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4cce</con1:id>
            <con2:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/MapFaultHandlerReqXQuery"/>
                <con2:param name="validationMessages">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'netarchitecture/pagination/pagination/proxyservice/Pagination12V1LCL.PipelinePairNode.ValidateRequestContent'</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>fn:data($fault/ctx:errorCode)</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$null</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="additionalInformation">
                  <con2:path>$header/pag:Pagination</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con2:expr>
          </con2:assign>
          <con2:wsCallout>
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4ccd</con1:id>
            <con2:service xsi:type="ref:ProxyRef" ref="netarchitecture/fault/faulthandler/proxyservice/FaultHandler12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con2:operation>faultHandler</con2:operation>
            <con2:request>
              <con2:body>$errorHandlerRequest</con2:body>
              <con2:header>$header</con2:header>
            </con2:request>
            <con2:response>
              <con2:body>errorHandlerResponse</con2:body>
            </con2:response>
            <con2:requestTransform/>
            <con2:responseTransform/>
          </con2:wsCallout>
          <con2:assign varName="customFault">
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4ccc</con1:id>
            <con2:expr>
              <con3:xqueryTransform xmlns:con3="http://www.bea.com/wli/sb/stages/config">
                <con3:resource ref="netarchitecture/fault/faulthandler/transformation/xquery/TransformOSBFaultToRuntimeFaultXQuery"/>
                <con3:param name="fault">
                  <con3:path>$errorHandlerResponse/ctx:fault</con3:path>
                </con3:param>
              </con3:xqueryTransform>
            </con2:expr>
          </con2:assign>
          <con2:wsCallout>
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4cca</con1:id>
            <con2:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/formatlogmessage/proxyservice/FormatLogMessage12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con2:operation>formatLogMessage</con2:operation>
            <con2:request>
              <con2:body>$formatLogMessageRequest</con2:body>
              <con2:header>$header</con2:header>
            </con2:request>
            <con2:response>
              <con2:body>formatLogMessageResponse</con2:body>
            </con2:response>
            <con2:requestTransform>
              <con2:assign varName="formatLogMessageRequest">
                <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4ccb</con1:id>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config"><![CDATA[<for:formatLogMessageRequest>
    <log:LogMessage>
        <log:Timestamp>{fn:data(fn:current-dateTime())}</log:Timestamp>
        <log:LogType>{'WARN'}</log:LogType>
        <log:MessageCode>{data($errorHandlerRequest/faul:messageCode)}</log:MessageCode>
        <log:MessageParameters>
            {$localMessageParameters/@* , $localMessageParameters/node()}
        </log:MessageParameters>
        <err:ErrorInfo>
            {$errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/@* , $errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/node() }
        </err:ErrorInfo>
    </log:LogMessage>
</for:formatLogMessageRequest>]]></con3:xqueryText>
                </con2:expr>
              </con2:assign>
            </con2:requestTransform>
            <con2:responseTransform/>
          </con2:wsCallout>
          <con3:log>
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4cc9</con1:id>
            <con3:logLevel>warning</con3:logLevel>
            <con3:expr>
              <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)</con3:xqueryText>
            </con3:expr>
            <con3:message>Erro</con3:message>
          </con3:log>
          <con2:wsCallout>
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4cc7</con1:id>
            <con2:service xsi:type="ref:ProxyRef" ref="netarchitecture/monitoring/alert/proxyservice/Alert12V1SB" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con2:operation>alert</con2:operation>
            <con2:request>
              <con2:body>$alertRequest</con2:body>
              <con2:header>$header</con2:header>
            </con2:request>
            <con2:response>
              <con2:body>alertResponse</con2:body>
            </con2:response>
            <con2:requestTransform>
              <con2:assign varName="alertRequest">
                <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4cc8</con1:id>
                <con2:expr>
                  <con1:xqueryText><![CDATA[<alert:alertRequest>
    <aler:Timestamp>{data(fn:current-dateTime())}</aler:Timestamp>
    <aler:Message>{fn:data($formatLogMessageResponse/log:FormattedLogMessage/log:Message)}</aler:Message>
    <aler:ServiceSeverityLevel>{'LEVEL1'}</aler:ServiceSeverityLevel>
    <nid:NidDomain>{'NETARCHITECTURE'}</nid:NidDomain>
    <abe:NidAbeLevel>{'PAGINATION'}</abe:NidAbeLevel>
    <aler:ExceptionClassification>{fn:data($errorHandlerResponse/ctx:fault/ctx:details/err:ErrorInfo/err:ExceptionClassification)}</aler:ExceptionClassification>
</alert:alertRequest>]]></con1:xqueryText>
                </con2:expr>
              </con2:assign>
            </con2:requestTransform>
            <con2:responseTransform/>
          </con2:wsCallout>
          <con2:Error>
            <con1:id>_ActionId-7377944730672438887--29de4611.13b66774f52.-4cc6</con1:id>
            <con2:errCode>LOCAL_FAULT</con2:errCode>
          </con2:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:flow>
      <con:pipeline-node name="PipelinePairNode">
        <con:request>PipelinePairNode_request</con:request>
        <con:response>PipelinePairNode_response</con:response>
      </con:pipeline-node>
    </con:flow>
  </ser:router>
</xml-fragment>